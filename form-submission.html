<!DOCTYPE html>
<html>
<head>
	<title>
		Form-Submission - Matrix
	</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" type="text/css" href="assets/css/bootstrap.css">
	<link rel="stylesheet" type="text/css" href="assets/css/form.css">
	<link rel="stylesheet" type="text/css" href="assets/css/responsive.css">
	<link rel="icon" type="image/x-icon" href="assets/imgs/favicon.jpeg"><link rel="stylesheet" type="text/css" href="stuff/fontawesome/css/all.min.css">
</head>
<body>

	<!-- NavBar -->
	<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
	    <div class="container-fluid">
		    <a class="navbar-brand" href="#">
		    </a>
		    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
		      <span class="navbar-toggler-icon"></span>
		    </button>
		    <div class="collapse navbar-collapse" id="navbar">
		        <ul class="navbar-nav ml-auto">
			       <li class="nav-item">
			            <a class="nav-link active" aria-current="page" href="form-submission.html">
			            	<i class="fas fa-home"></i>	Home
			        	</a>
			        </li>
			        <li class="nav-item">
			            <a class="nav-link" href="#">
			            	<i class="fas fa-address-card"></i> Form-Submission
			        	</a>
			        </li>
			        <li class="nav-item">
			            <a class="nav-link" href="#" id="admin-btn	>
			            	<i class="fas fa-code"></i>
			            	Admin 
			        	</a>
			        </li>
			         <li class="nav-item">
			            <a class="nav-link" href="#">
			            	<i class="fas fa-address-book"></i> Contact
			        	</a>
			        </li>
		        </ul>
		    </div>
	    </div>
	</nav>
	<!-- Form -->
	<main class="main-container">
			<header class="header">
				<h2 class="head">Student - Form Submission</h2>
			</header>
		<section class="form-container">
			<div class="col-12 col-lg-6 col-md-6 col-sm-12">
				<form id="form">
					<fieldset>
						<label>Name</label>
						<input type="" name="" class="form-control" placeholder="Enter Name">
					</fieldset>
					<fieldset>
						<label>Parentage</label>
						<input type="" name="" class="form-control" placeholder="Enter Parentage">
					</fieldset>
					<fieldset>
						<label>Class</label>
						<input type="" name="" class="form-control" placeholder="Enter Class">
					</fieldset>
					<fieldset>
						<label>Address</label>
						<input type="" name="" class="form-control" placeholder="Enter Addrees">
					</fieldset>
					<fieldset>
						<label>School</label>
						<input type="" name="" class="form-control" placeholder="Enter School">
					</fieldset>
					<fieldset>
						<label>Course</label>
						<select class="form-control">
							<option>Select</option>
							<option>Winter Course</option>
							<option>Full Course</option>
						</select>
					</fieldset>
					<fieldset>
						<label>Subjects</label>
						<select class="form-control">
							<option>Select</option>
							<option>Math, Science, Social.Science</option>
							<option>Above + English, Urdu</option>
						</select>
					</fieldset>
					<fieldset>
						<label>Contact</label>
						<input type="number" class="form-control" placeholder="Enter Number">
					</fieldset>
					<button class="btn btn-primary" id="submitBtn"><i class="fas fa-plus-circle"></i> Submit</button>
				</form>
			</div>
		</section>
	<!-- Footer -->
		<footer class="footer bg-dark">
			<h3 class="foot">Designed And Developed By Bilal War</h3>
		</footer>
	<!-- Admin Modal -->
	<div class="modal fade" id="admin-login-modal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
	  <div class="modal-dialog">
	    <div class="modal-content">
	      <div class="modal-header">
	        <h5 class="modal-title" id="exampleModalLabel">Admin Login</h5>
	      </div>
	      <div class="modal-body">
	       	<fieldset>
	       		<label style="color: black;">Email</label>
	       		<input type="email" id="email" class="form-control">
	       	</fieldset>
	       	<fieldset>
	       		<label style="color: black;">Password</label>
	       		<input type="password" id="password" class="form-control">
	       	</fieldset>

	      </div>
	      <div class="modal-footer d-flex justify-content-between">
	        <div class="d-flex">
	        	<button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
	        	<button type="button" class="ml-3 btn btn-primary" id="user-login">Login</button>
	        </div>
	      </div>
	    </div>
	  </div>
	</div>	

	</main>
	
	<script src="assets/js/jquery.min.js"></script>										  
	<script src="assets/js/bootstrap.bundle.min.js"></script>
	<script src="https://kit.fontawesome.com/de41999cf3.js"></script>
	<script>

		$(document).ready(()=>{
		
		$("#admin-btn").click(()=>{
				$("#admin-login-modal").modal('show');
			});
						      
			// user login 
			$("#user-login").click(()=>{
				let email = $("#email").val();
				let pw = $("#password").val();

				let rawData = { email:email, password:pw };
				let data = JSON.stringify(rawData);

				$.ajax({
					url: "https://alphacoders.ga/projects/attendance-manager-api/userLogin.php",
					method: "POST",
					data: data,
					dataType: "json",
					success: function (res) {
						console.log(res);
						if (res.status == true) {
							window.location = "submitAttendance.html";
							sessionStorage.setItem('loginStatus', 'true');
							sessionStorage.setItem("userInfo", JSON.stringify(res.userInfo));
						}
						else {
							alert(res.msg);
							window.location = "submitAttendance.html";
							sessionStorage.setItem('loginStatus', 'false');
						}
					},
					error: function() {
						console.log("login req failed");
					}

				})

			});				      
		});

	</script>							       
							       

</body>
</html>
